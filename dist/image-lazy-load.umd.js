!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).GLWidget=e()}(this,(function(){"use strict";var t=window.IntersectionObserver?new IntersectionObserver((function(e){e.forEach((function(e){var n,r=e.target;e.intersectionRatio>0&&((n=r.getAttribute("data-src"),new Promise((function(t,e){var r=new Image;r.onload=function(){return t({src:n,img:r})},r.onerror=function(){return e()},r.src=n}))).then((function(t){var e=t.src;window.requestAnimationFrame((function(){r.src=e,r.style.transition="all 1s ease",r.style.opacity=1,r.setAttribute("data-loaded","true")})),r.style.opacity=0})).catch((function(){r.src="",r.setAttribute("data-loaded","false"),r.classList.add("img-error")})).finally((function(){r.classList.remove("img-loading")})),t.unobserve(r))}))})):null;return{beforeMount:function(e){var n=e.getAttribute("src"),r=e.getAttribute("data-src");"IMG"===e.tagName&&(window.IntersectionObserver?(n||r)&&(e.style.opacity=1,e.setAttribute("data-src",n||r),e.setAttribute("src",""),e.classList.add("img-loading"),t.observe(e)):!n&&r&&e.setAttribute("src",r))},unmounted:function(e){t.unobserve(e)}}}));
